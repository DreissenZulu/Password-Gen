<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./assets/style.css">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP&display=swap" rel="stylesheet">
    <title>Password Generator</title>
</head>

<body>
    <header class="container d-flex justify-content-center">
        <h1>Password Generator</h1>
    </header>
    <div class="container">
        <main>
            <h2>Generate a Password</h2>
            <hr />
            <form>
                <div class="form-group">
                    <textarea class="form-control form-control-lg text-center" readonly id="password"
                        placeholder="Your Totally Secure Password That I Definitely Won't Steal"
                        aria-label="Generated Password" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="formControlRange" id="rangeValue">Password Length</label>
                    <input type="range" min="8" max="128" step="1" class="form-control-range" id="formControlRange">
                </div>
            </form>

            <hr />
            <div class="row">
                <div class="col-sm-6 d-flex justify-content-center">
                    <button class="btn btn-primary btn-lg" id="generate">
                        Generate Password
                    </button>
                </div>
                <div class="col-sm-6 d-flex justify-content-center">
                    <button class="btn btn-outline-secondary btn-lg" id="copy">
                        Copy to Clipboard
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Ignore this I'm doing something with this later
        // var pastryPrefix = ["Strawberry", "Apple", "Banana", "Blueberry", "Raspberry", "Chocolate Chip",
        //     "Cinnamon", "Walnut", "Peacan", "Almond", "Raisin", "Cream Cheese", "Whole Wheat", "Coconut",
        //     "Inflatable", "Rubber", "Explosive", "Microwaved", "Inedible", "Petrified", "Ancient", "Chonky",
        //     "Half-Eaten", "Illegal"];

        // var pastryPart1 = [];

        // Define all possible character types as string arrays
        var alphaLower = "abcdefghijklmnopqrstuvwxyz";
        var alphaUpper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        var numChar = "0123456789";
        var specChar = `!"#$%&'()*+,-./:;<=>?@[\]^_{|}~`+"`";

        // Define getPass as the text in the read-only text box
        var getPass = document.querySelector("#password");

        // Set the default value of the range, and also show the default value
        document.querySelector("#formControlRange").value = 12;
        updateLength();
        
        // Slider update function. Displays the value of the slider in the slider label
        function updateLength() {
            document.querySelector("#rangeValue").innerHTML = "Password Length: " + document.querySelector("#formControlRange").value;
        }

        // onchange updates the HTML when the slider is released. oninput updates as it's held down. Apparently oninput doesn't work on older versions of IE so I used both
        document.querySelector("#formControlRange").onchange = updateLength;
        document.querySelector("#formControlRange").oninput = updateLength;

        // The main event of this page. Generates a password based on parameters set once the Generate button is pressed
        document.querySelector("#generate").onclick = function makePassword() {
            var allChars = alphaLower + alphaUpper + numChar + specChar;
            // Gets the length of the password from the slider
            var passLength = document.querySelector("#formControlRange").value;
            // Empty the previous password, if it exists
            var newPass = "";

            // newPass is written randomly one character at a time for the length desired, based on the array of desired characters allChars
            for (var i = 0; i < passLength; i++) {
                newPass = newPass + allChars[Math.floor(Math.random() * allChars.length)];
            }

            // Sends the value of newPass to the textbox for copying
            getPass.innerHTML = newPass;
        }

        // When the Copy button is clicked, sends the password in the text box to the clipboard
        document.querySelector("#copy").onclick = function copyClip() {

        }


    </script>
</body>

</html>